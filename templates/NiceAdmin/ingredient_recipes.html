{% extends "NiceAdmin/template.html" %}


{% block content %}
    <main id="main" class="main">

    <section class="section dashboard">
<div class="row">
  <div>
      <h1>{{ ingredient.name }}</h1>
    <ul>
        {% for recipe in recipes %}
            <li><strong>{{ recipe.title }}</strong>
                {% if recipe.link %}(<a href="{{ recipe.link }}">{{ recipe.source }}, {{ recipe.subsource }}</a>)
                {% else %}
                   ({{ recipe.source }}, {{ recipe.subsource }})
                {%  endif %}
                {% if recipe.vegetarian == "V" %}
                <span title="Vegetarian" style="color: green;">&#127811</span> <!-- Carrot -->
                {% elif recipe.vegetarian == "F" %}
                <span title="With fish" style="color: blue;">&#128031</span> <!-- Fish -->
                {% elif recipe.vegetarian == "S" %}
                <span title="With seafood" style="color: teal;">&#128026</span> <!-- Shellfish -->
                {% elif recipe.vegetarian == "M" %}
                <span title="With meat" style="color: brown;">&#127835</span> <!-- Poultry leg -->
                {% elif recipe.vegetarian == "N" %}
                <span title="Not specified" style="color: orange;">&#127797</span> <!-- Warning sign -->
                {% else %}
                <span title="No info" style="color: gray;">&#63</span> <!-- Question mark -->
                {% endif %}
                <br><em>{{ recipe.ingredients_string | safe }}</em>
            </li>
        {% endfor %}
    </ul>
  </div>
    <!-- Подключаем библиотеку jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Подключаем jsTree -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.10/jstree.min.js"></script>

    <script>
        $.jstree.defaults.plugins = ['wholerow', 'changed'
	];
        $(function () {
            // Инициализация jsTree
            $('#tree').jstree({
                'core' : {
                    'data' : {
                        'url' : '/get_tree_data/{{ dish_type }}',  // URL для получения данных об объектах
                        'data' : function (node) {
                            return { 'id' : node.id };
                        }
                    }
                }
            });
        });
        $("#tree").on("click", ".jstree-anchor", function(evt)
        {
            var link = $(evt.target).attr("href");
            window.open(link, '_self');
        });
    </script>
      </div>
    </section>

  </main><!-- End #main -->

{% endblock %}